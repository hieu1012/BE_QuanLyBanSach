# Hướng Dẫn Khởi Tạo Database

## Giới Thiệu
Script này sẽ khởi tạo database `quanlybansach` với tất cả các bảng và dữ liệu mẫu cho ứng dụng Quản Lý Bán Sách.

## Yêu Cầu
- MySQL hoặc MariaDB đã được cài đặt
- Có quyền truy cập vào máy chủ database
- MySQL/MariaDB client được cài đặt và có trong PATH

## Cấu Hình Mặc Định
```
Host: localhost
Port: 3306
User: root
Password: root
Database: quanlybansach
```

Nếu cấu hình của bạn khác, vui lòng chỉnh sửa các biến trong file script trước khi chạy.

## Cách Sử Dụng

### Trên Windows
1. Mở Command Prompt (cmd) hoặc PowerShell
2. Chuyển tới thư mục `database`:
   ```
   cd path\to\BE_QuanLyBanSach\database
   ```
3. Chạy script:
   ```
   run-init.bat
   ```

### Trên Linux/macOS
1. Mở Terminal
2. Chuyển tới thư mục `database`:
   ```
   cd path/to/BE_QuanLyBanSach/database
   ```
3. Cho phép thực thi script:
   ```
   chmod +x run-init.sh
   ```
4. Chạy script:
   ```
   ./run-init.sh
   ```

## Tệp Tin
- **init-database.sql**: File SQL chứa toàn bộ lệnh tạo database, bảng, và dữ liệu mẫu
- **run-init.bat**: Script batch cho Windows
- **run-init.sh**: Shell script cho Linux/macOS
- **README.md**: Tệp này

## Dữ Liệu Mẫu Được Tạo

### Users (Người Dùng)
- 2 Admin users
- 10 Customer users

### Categories (Danh Mục)
- 8 danh mục sách (Văn Học, Kỹ Thuật, Kinh Tế, Tâm Lý, Lịch Sử, Khoa Học, Ngoại Ngữ, Trẻ Em)

### Products (Sản Phẩm)
- 29 sách mẫu phân bố trong các danh mục

## Xác Minh Dữ Liệu
Sau khi chạy script, bạn có thể xác minh dữ liệu bằng:

```sql
-- Kết nối tới database
mysql -u root -p

-- Sử dụng database
USE quanlybansach;

-- Kiểm tra các bảng
SHOW TABLES;

-- Đếm dữ liệu
SELECT COUNT(*) as total_users FROM users;
SELECT COUNT(*) as total_categories FROM categories;
SELECT COUNT(*) as total_products FROM products;

-- Xem dữ liệu chi tiết
SELECT * FROM users;
SELECT * FROM categories;
SELECT * FROM products;
```

## Ghi Chú Quan Trọng
1. Script sẽ **XÓA** tất cả dữ liệu cũ nếu các bảng đã tồn tại
2. Nếu database không tồn tại, nó sẽ được tạo tự động
3. Hãy chắc chắn rằng MySQL/MariaDB service đang chạy trước khi thực thi

## Khắc Phục Sự Cố

### Lỗi: "mysql command not found"
- **Nguyên nhân**: MySQL/MariaDB client chưa được cài đặt hoặc không có trong PATH
- **Giải pháp**:
  - Cài đặt MySQL/MariaDB client
  - Thêm thư mục bin của MySQL vào PATH

### Lỗi: "Access denied for user 'root'@'localhost'"
- **Nguyên nhân**: Mật khẩu database sai
- **Giải pháp**: Chỉnh sửa biến `DB_PASSWORD` trong script hoặc file init-database.sql

### Lỗi: "Can't connect to MySQL server on 'localhost'"
- **Nguyên nhân**: MySQL/MariaDB server không chạy
- **Giải pháp**: Khởi động dịch vụ MySQL/MariaDB

## Hỗ Trợ
Nếu gặp vấn đề, vui lòng:
1. Kiểm tra lại MySQL/MariaDB đang chạy
2. Kiểm tra username và password
3. Kiểm tra host và port
4. Xem thêm trong file init-database.sql để hiểu cấu trúc database

## Cấu Trúc Database

```
quanlybansach
├── users (id, username, email, password, full_name, phone_number, address, role, is_active, created_at, updated_at)
├── categories (id, name, image_name, is_active)
├── products (id, title, description, price, discount_price, discount, stock, image_name, is_active, category_id)
├── order_addresses (id, first_name, last_name, email, mobile_no, address, city, state, pincode)
├── orders (id, order_id, order_date, status, payment_type, total_price, order_address_id, user_id)
└── order_items (id, order_id, product_id, quantity, price)
```

---
**Ngày tạo**: 19/11/2025
